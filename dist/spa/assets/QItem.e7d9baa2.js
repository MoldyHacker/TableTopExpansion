import{n as v,I as de,r as _,c as r,w as ee,z as _e,h as q,m as Oe,k as fe,g as ve,s as z,a1 as te,D as h,a2 as He}from"./index.58564a6b.js";import{k as Fe,u as Me,l as Ke,v as oe,m as Re,a as Ae,n as De,b as Ie,o as We,p as Qe,q as $e,d as ze,r as Ve,s as ne,g as Xe,t as Ye,w as le,x as je,y as Ne,f as Ue,e as Ge,z as Je}from"./position-engine.c3f824e7.js";import{a as me,u as he}from"./use-dark.611856a0.js";import{c as O,b as V,d as Ze}from"./render.a7501c6e.js";import{c as et,u as tt,a as ot}from"./use-router-link.8ff5dd5e.js";import{a as nt}from"./focus-manager.b507780d.js";const b=[];let k;function lt(e){k=e.keyCode===27}function it(){k===!0&&(k=!1)}function at(e){k===!0&&(k=!1,de(e,27)===!0&&b[b.length-1](e))}function ge(e){window[e]("keydown",lt),window[e]("blur",it),window[e]("keyup",at),k=!1}function st(e){v.is.desktop===!0&&(b.push(e),b.length===1&&ge("addEventListener"))}function ie(e){const t=b.indexOf(e);t>-1&&(b.splice(t,1),b.length===0&&ge("removeEventListener"))}const y=[];function be(e){y[y.length-1](e)}function rt(e){v.is.desktop===!0&&(y.push(e),y.length===1&&document.body.addEventListener("focusin",be))}function ut(e){const t=y.indexOf(e);t>-1&&(y.splice(t,1),y.length===0&&document.body.removeEventListener("focusin",be))}var wt=O({name:"QMenu",inheritAttrs:!1,props:{...Fe,...Me,...me,...Ke,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:oe},self:{type:String,validator:oe},offset:{type:Array,validator:Re},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Ae,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:l}){let i=null,d,s,p;const P=ve(),{proxy:T}=P,{$q:u}=T,c=_(null),f=_(!1),m=r(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),H=he(e,u),{registerTick:F,removeTick:M}=De(),{registerTimeout:L}=Ie(),{transitionProps:K,transitionStyle:a}=We(e),{localScrollTarget:x,changeScrollEvent:ye,unconfigureScrollTarget:we}=Qe(e,J),{anchorEl:w,canShow:qe}=$e({showing:f}),{hide:X}=ze({showing:f,canShow:qe,handleShow:Se,handleHide:Ee,hideOnRouteChange:m,processOnMount:!0}),{showPortal:Y,hidePortal:j,renderPortal:ke}=Ve(P,c,Pe,"menu"),R={anchorEl:w,innerRef:c,onClickOutside(o){if(e.persistent!==!0&&f.value===!0)return X(o),(o.type==="touchstart"||o.target.classList.contains("q-dialog__backdrop"))&&z(o),!0}},N=r(()=>le(e.anchor||(e.cover===!0?"center middle":"bottom start"),u.lang.rtl)),pe=r(()=>e.cover===!0?N.value:le(e.self||"top start",u.lang.rtl)),Te=r(()=>(e.square===!0?" q-menu--square":"")+(H.value===!0?" q-menu--dark q-dark":"")),xe=r(()=>e.autoClose===!0?{onClick:Ce}:{}),U=r(()=>f.value===!0&&e.persistent!==!0);ee(U,o=>{o===!0?(st(D),je(R)):(ie(D),ne(R))});function A(){nt(()=>{let o=c.value;o&&o.contains(document.activeElement)!==!0&&(o=o.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.querySelector("[autofocus], [data-autofocus]")||o,o.focus({preventScroll:!0}))})}function Se(o){if(i=e.noRefocus===!1?document.activeElement:null,rt(Z),Y(),J(),d=void 0,o!==void 0&&(e.touchPosition||e.contextMenu)){const I=_e(o);if(I.left!==void 0){const{top:Le,left:Be}=w.value.getBoundingClientRect();d={left:I.left-Be,top:I.top-Le}}}s===void 0&&(s=ee(()=>u.screen.width+"|"+u.screen.height+"|"+e.self+"|"+e.anchor+"|"+u.lang.rtl,S)),e.noFocus!==!0&&document.activeElement.blur(),F(()=>{S(),e.noFocus!==!0&&A()}),L(()=>{u.platform.is.ios===!0&&(p=e.autoClose,c.value.click()),S(),Y(!0),n("show",o)},e.transitionDuration)}function Ee(o){M(),j(),G(!0),i!==null&&(o===void 0||o.qClickOutside!==!0)&&(((o&&o.type.indexOf("key")===0?i.closest('[tabindex]:not([tabindex^="-"])'):void 0)||i).focus(),i=null),L(()=>{j(!0),n("hide",o)},e.transitionDuration)}function G(o){d=void 0,s!==void 0&&(s(),s=void 0),(o===!0||f.value===!0)&&(ut(Z),we(),ne(R),ie(D)),o!==!0&&(i=null)}function J(){(w.value!==null||e.scrollTarget!==void 0)&&(x.value=Xe(w.value,e.scrollTarget),ye(x.value,S))}function Ce(o){p!==!0?(Ne(T,o),n("click",o)):p=!1}function Z(o){U.value===!0&&e.noFocus!==!0&&et(c.value,o.target)!==!0&&A()}function D(o){n("escapeKey"),X(o)}function S(){const o=c.value;o===null||w.value===null||Ye({el:o,offset:e.offset,anchorEl:w.value,anchorOrigin:N.value,selfOrigin:pe.value,absoluteOffset:d,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Pe(){return q(Oe,K.value,()=>f.value===!0?q("div",{role:"menu",...l,ref:c,tabindex:-1,class:["q-menu q-position-engine scroll"+Te.value,l.class],style:[l.style,a.value],...xe.value},V(t.default)):null)}return fe(G),Object.assign(T,{focus:A,updatePosition:S}),ke}});function qt(e,t,n){let l;function i(){l!==void 0&&(te.remove(l),l=void 0)}return fe(()=>{e.value===!0&&i()}),{removeFromHistory:i,addToHistory(){l={condition:()=>n.value===!0,handler:t},te.add(l)}}}let E=0,W,Q,C,$=!1,ae,se,re,g=null;function ct(e){dt(e)&&z(e)}function dt(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=He(e),n=e.shiftKey&&!e.deltaX,l=!n&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),i=n||l?e.deltaY:e.deltaX;for(let d=0;d<t.length;d++){const s=t[d];if(Je(s,l))return l?i<0&&s.scrollTop===0?!0:i>0&&s.scrollTop+s.clientHeight===s.scrollHeight:i<0&&s.scrollLeft===0?!0:i>0&&s.scrollLeft+s.clientWidth===s.scrollWidth}return!0}function ue(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function B(e){$!==!0&&($=!0,requestAnimationFrame(()=>{$=!1;const{height:t}=e.target,{clientHeight:n,scrollTop:l}=document.scrollingElement;(C===void 0||t!==window.innerHeight)&&(C=n-t,document.scrollingElement.scrollTop=l),l>C&&(document.scrollingElement.scrollTop-=Math.ceil((l-C)/8))}))}function ce(e){const t=document.body,n=window.visualViewport!==void 0;if(e==="add"){const{overflowY:l,overflowX:i}=window.getComputedStyle(t);W=Ue(window),Q=Ge(window),ae=t.style.left,se=t.style.top,re=window.location.href,t.style.left=`-${W}px`,t.style.top=`-${Q}px`,i!=="hidden"&&(i==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),l!=="hidden"&&(l==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,v.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",B,h.passiveCapture),window.visualViewport.addEventListener("scroll",B,h.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",ue,h.passiveCapture))}v.is.desktop===!0&&v.is.mac===!0&&window[`${e}EventListener`]("wheel",ct,h.notPassive),e==="remove"&&(v.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",B,h.passiveCapture),window.visualViewport.removeEventListener("scroll",B,h.passiveCapture)):window.removeEventListener("scroll",ue,h.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=ae,t.style.top=se,window.location.href===re&&window.scrollTo(W,Q),C=void 0)}function ft(e){let t="add";if(e===!0){if(E++,g!==null){clearTimeout(g),g=null;return}if(E>1)return}else{if(E===0||(E--,E>0))return;if(t="remove",v.is.ios===!0&&v.is.nativeMobile===!0){g!==null&&clearTimeout(g),g=setTimeout(()=>{ce(t),g=null},100);return}}ce(t)}function kt(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,ft(t))}}}function pt(e,t,n){return n<=t?t:Math.min(n,Math.max(t,e))}function Tt(e,t,n){if(n<=t)return t;const l=n-t+1;let i=t+(e-t)%l;return i<t&&(i=l+i),i===0?0:i}var xt=O({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const n=r(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>q("div",{class:n.value},V(t.default))}}),St=O({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const n=r(()=>parseInt(e.lines,10)),l=r(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),i=r(()=>e.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>q("div",{style:i.value,class:l.value},V(t.default))}}),Et=O({name:"QItem",props:{...me,...tt,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:n}){const{proxy:{$q:l}}=ve(),i=he(e,l),{hasLink:d,linkAttrs:s,linkClass:p,linkTag:P,navigateOnClick:T}=ot(),u=_(null),c=_(null),f=r(()=>e.clickable===!0||d.value===!0||e.tag==="label"),m=r(()=>e.disable!==!0&&f.value===!0),H=r(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(i.value===!0?" q-item--dark":"")+(d.value===!0&&e.active===null?p.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(m.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),F=r(()=>{if(e.insetLevel===void 0)return null;const a=l.lang.rtl===!0?"Right":"Left";return{["padding"+a]:16+e.insetLevel*56+"px"}});function M(a){m.value===!0&&(c.value!==null&&(a.qKeyEvent!==!0&&document.activeElement===u.value?c.value.focus():document.activeElement===c.value&&u.value.focus()),T(a))}function L(a){if(m.value===!0&&de(a,13)===!0){z(a),a.qKeyEvent=!0;const x=new MouseEvent("click",a);x.qKeyEvent=!0,u.value.dispatchEvent(x)}n("keyup",a)}function K(){const a=Ze(t.default,[]);return m.value===!0&&a.unshift(q("div",{class:"q-focus-helper",tabindex:-1,ref:c})),a}return()=>{const a={ref:u,class:H.value,style:F.value,role:"listitem",onClick:M,onKeyup:L};return m.value===!0?(a.tabindex=e.tabindex||"0",Object.assign(a,s.value)):f.value===!0&&(a["aria-disabled"]="true"),q(P.value,a,K())}}});export{xt as Q,kt as a,pt as b,St as c,Et as d,wt as e,ie as f,rt as g,st as h,Tt as n,ut as r,qt as u};
